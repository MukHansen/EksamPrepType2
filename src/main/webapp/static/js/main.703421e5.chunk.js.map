{"version":3,"sources":["settings.js","components/loginFacade.js","components/LogIn.js","components/Search.js","components/Home.js","components/Hobbies.js","App.js","index.js"],"names":["URL","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","facade","setToken","token","localStorage","setItem","getToken","getItem","loggedIn","console","log","logout","removeItem","login","user","pass","options","makeOptions","username","password","fetch","then","catch","err","getRole","jwtData","split","decodedJwtJsonData","window","atob","JSON","parse","roles","fetchAllHobbies","deleteHobby","hobby","addEditHobby","fetchPersonsByHobby","fetchPersonById","id","fetchPersonByEmail","email","fetchPersonByPhone","phone","fetchData","method","addToken","body","opts","headers","Accept","this","stringify","LogIn","props","useState","setUser","setPass","onClick","evt","preventDefault","onChange","target","value","placeholder","type","Search","fName","lName","person","setPerson","personsList","setPersonsList","a","document","getElementById","personData","getData","personsByHobbyData","map","key","uuid","Home","Hobbies","allHobbies","setAllHobbies","name","description","deletingHobby","hobbyData","hobbsy","addEditingHobby","Header","className","exact","activeClassName","to","NoMatch","App","setLoggedIn","useEffect","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.703421e5.chunk.js","sourcesContent":["const URL = \"https://mukh.dk/EksamPrepType1\";\r\n\r\n// const URL = \"http://localhost:8080/EksamPrepType1\";\r\n\r\nexport default URL;","import URL from \"../settings\";\r\n\r\nfunction handleHttpErrors(res) {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n}\r\n\r\nclass LoginFacade {\r\n  setToken = token => {\r\n    localStorage.setItem(\"jwtToken\", token);\r\n  };\r\n  getToken = () => {\r\n    return localStorage.getItem(\"jwtToken\");\r\n  };\r\n  loggedIn = () => {\r\n    console.log(\"loggedIn func\");\r\n    const loggedIn = this.getToken() != null;\r\n    return loggedIn;\r\n  };\r\n  logout = () => {\r\n    localStorage.removeItem(\"jwtToken\");\r\n  };\r\n  login = (user, pass) => {\r\n    console.log(\"user, pass\", user, pass);\r\n    const options = this.makeOptions(\"POST\", true, {\r\n      username: user,\r\n      password: pass\r\n    });\r\n    return fetch(URL + \"/api/login\", options)\r\n      .then(handleHttpErrors)\r\n      .then(res => {\r\n        this.setToken(res.token);\r\n      })\r\n      .catch(err => {\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  getRole = () => {\r\n    let jwt = localStorage.getItem(\"jwtToken\");\r\n    let jwtData = jwt.split(\".\")[1];\r\n    let decodedJwtJsonData = window.atob(jwtData);\r\n    let decodedJwtData = JSON.parse(decodedJwtJsonData);\r\n    return decodedJwtData.roles;\r\n  };\r\n\r\n  makeOptions(method, addToken, body) {\r\n    console.log(\"makeOptions\");\r\n    var opts = {\r\n      method: method,\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        Accept: \"application/json\"\r\n      }\r\n    };\r\n    if (addToken && this.loggedIn()) {\r\n      opts.headers[\"x-access-token\"] = this.getToken();\r\n    }\r\n    if (body) {\r\n      opts.body = JSON.stringify(body);\r\n    }\r\n    console.log(\"opts\", opts);\r\n    return opts;\r\n  }\r\n\r\n  fetchAllHobbies = () => {\r\n    console.log(\"fetchingAllHobbies\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/allhobbies\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  deleteHobby = (hobby) => {\r\n    console.log(\"Deleting hobby\", hobby);\r\n    const options = this.makeOptions(\"DELETE\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/deletehobby/\" + hobby, options).then(handleHttpErrors);\r\n  };\r\n\r\n  addEditHobby = (hobby) => {\r\n    console.log(\"Editing hobby\", hobby);\r\n    const options = this.makeOptions(\"PUT\", true, hobby); //True add's the token\r\n    return fetch(URL + \"/api/person/edithobby\", options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonsByHobby = (hobby) => {\r\n    console.log(\"fetchingPersonsByHobby\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/hobby/\" + hobby, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonById = (id) => {\r\n    console.log(\"fetchingPersonById\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/id/\" + id, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonByEmail = (email) => {\r\n    console.log(\"fetchingPersonByEmail\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/email/\" + email, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchPersonByPhone = (phone) => {\r\n    console.log(\"fetchingPersonByPhone\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    return fetch(URL + \"/api/person/phone/\" + phone, options).then(handleHttpErrors);\r\n  };\r\n\r\n  fetchData = () => {\r\n    console.log(\"fetchData\");\r\n    const options = this.makeOptions(\"GET\", true); //True add's the token\r\n    if (this.getRole() === \"admin\") {\r\n      return fetch(URL + \"/api/info/admin\", options).then(handleHttpErrors);\r\n    } else {\r\n      return fetch(URL + \"/api/info/user\", options).then(handleHttpErrors);\r\n    }\r\n  };\r\n}\r\nconst facade = new LoginFacade();\r\nexport default facade;\r\n","import React, { useState } from \"react\";\r\n\r\nfunction LogIn(props) {\r\n  console.log(\"LogIn\");\r\n  const [user, setUser] = useState(\"\");\r\n  const [pass, setPass] = useState(\"\");\r\n  console.log(\"user, pass\", user, pass)\r\n\r\n  const login = (evt) => {\r\n    console.log(\"LogIn - login\");\r\n    evt.preventDefault();\r\n    console.log(\"user, pass\", user, pass)\r\n    props.login(user, pass);\r\n  };\r\n\r\n  const logout = (evt) => {\r\n    console.log(\"LogIn - logout\");\r\n    evt.preventDefault();\r\n    props.logout();\r\n  };\r\n\r\n  const onChange = evt => {\r\n    console.log(\"onChange  ->\", evt.target.id);\r\n    if ([evt.target.id] == \"username\") {\r\n      console.log(\"username\", evt.target.value);\r\n      setUser(evt.target.value);\r\n    } else {\r\n      console.log(\"password\", evt.target.value);\r\n      setPass(evt.target.value);\r\n    }\r\n  };\r\n\r\n  if (!props.loggedIn) {\r\n    return (\r\n      <div>\r\n        <h2>Login</h2>\r\n        <form onChange={onChange}>\r\n          <input placeholder=\"User Name\" id=\"username\" />\r\n          <input placeholder=\"Password\" id=\"password\" type=\"password\" />\r\n          <button onClick={login}>Login</button>\r\n        </form>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div>\r\n        <h2>Logout</h2>\r\n        <button onClick={logout}>Logout</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default LogIn;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\nimport URL from \"../settings\";\r\n\r\nfunction Search({ loggedIn }) {\r\n    console.log(\"Data\");\r\n    console.log(\"loggedIn\", loggedIn);\r\n    // const [person, setPerson] = useState([]);\r\n    const initialState = {fName: \"\", lName: \"\", phone: \"\", email: \"\"};\r\n    const [person, setPerson] = useState(initialState);\r\n    const [personsList, setPersonsList] = useState([]);\r\n\r\n    const searchById = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    const personData = await facade.fetchPersonById(document.getElementById(\"id\").value);\r\n                    console.log(\"fetchingById personData\", personData);\r\n                    setPerson(personData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n    const searchByEmail = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    const personData = await facade.fetchPersonByEmail(document.getElementById(\"email\").value);\r\n                    console.log(\"fetchingByEmail personData\", personData);\r\n                    setPerson(personData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n\r\n      const searchByPhone = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    const personData = await facade.fetchPersonByPhone(document.getElementById(\"phone\").value);\r\n                    console.log(\"fetchingByPhone personData\", personData);\r\n                    setPerson(personData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n      const searchByHobby = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    const personsByHobbyData = await facade.fetchPersonsByHobby(document.getElementById(\"hobbyName\").value);\r\n                    console.log(\"fetchingPersonsByHobby personData\", personsByHobbyData);\r\n                    setPersonsList(personsByHobbyData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n\r\n    if (loggedIn) {\r\n        return (\r\n            <div>\r\n                <hr />\r\n                    <input placeholder=\"Id\" type=\"text\" id=\"id\" />\r\n                    <button onClick={searchById}>Search by id</button>\r\n                <hr />\r\n                    <input placeholder=\"Email\" type=\"text\" id=\"email\" />\r\n                    <button onClick={searchByEmail}>Search by email</button>\r\n                <hr />\r\n                    <input placeholder=\"Phone\" type=\"text\" id=\"phone\" />\r\n                    <button onClick={searchByPhone}>Search by phone</button>\r\n                <hr />\r\n                    <input placeholder=\"HobbyName\" type=\"text\" id=\"hobbyName\" />\r\n                    <button onClick={searchByHobby}>Search by Hobby</button>\r\n                <hr />\r\n                <div>\r\n                    <table>\r\n                        <tbody>\r\n                        <tr><td>First name:</td><td>{person.fName}</td></tr>\r\n                        <tr><td>Last name:</td><td>{person.lName}</td></tr>\r\n                        <tr><td>Phone:</td><td>{person.phone}</td></tr>\r\n                        <tr><td>Email:</td><td>{person.email}</td></tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <table>\r\n                        <thead>\r\n                            {/* <tr><td>{document.getElementById(\"hobbyName\").value}</td></tr> */}\r\n                            <tr><td>First name</td><td>Last name</td><td>Phone</td><td>Email</td></tr>\r\n                            </thead>\r\n                        <tbody>\r\n                            {personsList.map((person) => (\r\n                                <tr key={uuid()}>\r\n                                    <td>{person.fName}</td>\r\n                                    <td>{person.lName}</td>\r\n                                    <td>{person.phone}</td>\r\n                                    <td>{person.email}</td>\r\n                                </tr>\r\n                            ))} \r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div >\r\n        )\r\n    } else {\r\n        return (\r\n            <div>\r\n                <h2> Please login to view data</h2>\r\n            </div >\r\n        )\r\n    }\r\n}\r\nexport default Search;\r\n\r\n// const searchById = () => {\r\n//     const ID = document.querySelector(\"#id\").value;\r\n//     console.log(\"searching for id\", ID);\r\n//     const options = facade.makeOptions(\"GET\", true); //True add's the token\r\n//     fetch(URL + \"/api/person/id/\" + ID, options)\r\n//     .then(res => res.json())\r\n//     .then(facade.handleHttpErrors)\r\n//     .then(personData => {\r\n//         console.log(\"Person data\", personData);\r\n//         setPerson({fName: personData.fName, lName: personData.lName, phone: personData.phone, email: personData.email});\r\n//         setPersonFirstName(personData.fName);\r\n//         console.log(\"personFirstName -->\", personFirstName.fName);\r\n//         console.log(\"person fName\", person.fName);\r\n//         console.log(\"personData fName\", personData.fName);\r\n//         console.log(\"person \", person);\r\n//     })\r\n//     return (\r\n//     // return document.getElementById(\"content\").innerHTML = (\r\n//         <div id=\"content\">\r\n//             {/* <p>{JSON.stringify(person.fName)}</p> */}\r\n//             <h2>what</h2>\r\n//             <p>first name: {personFirstName}</p>\r\n//             <p>first name: {person}</p>\r\n//         </div>\r\n//     )\r\n//   };\r\n\r\n\r\n\r\n// const searchById = () => {\r\n//     var personData = {};\r\n//     console.log(\"personData berfore fetch\", personData);\r\n//     const ID = document.querySelector(\"#id\").value;\r\n//     console.log(\"searching for id\", ID);\r\n//     const options = facade.makeOptions(\"GET\", true); //True add's the token\r\n//     fetch(URL + \"/api/person/id/\" + ID, options)\r\n//     .then(res => res.json())\r\n//     .then(facade.handleHttpErrors)\r\n//     .then(data => {\r\n//         console.log(data);\r\n//         personData = data;\r\n//         console.log(\"personData after fetch\", personData);\r\n//     })\r\n//     console.log(\"personData berfore setPerson\", personData);\r\n//     return setPerson({personData})\r\n//   };","import React from \"react\";\r\n\r\nfunction Home() {\r\n    console.log(\"Home\");\r\n    return (\r\n        <div>\r\n            <hr/>\r\n                <h2>Welcome to Test-Exam-Exercise 1</h2>\r\n            <hr/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from \"react\";\r\nimport facade from \"./loginFacade\";\r\nimport uuid from \"uuid/v1\";\r\n\r\nfunction Hobbies({ loggedIn, allHobbies, setAllHobbies }) {\r\n    console.log(\"Hobbies\");\r\n\r\n    const deleteHobbyByName = () => {\r\n        if (loggedIn) {\r\n            const getData = async () => {\r\n                try {\r\n                    const deletingHobby = await facade.deleteHobby(document.getElementById(\"hobbyToDelete\").value);\r\n                    console.log(\"Deleting Hobby\", deletingHobby);\r\n                    const hobbyData = await facade.fetchAllHobbies();\r\n                    console.log(\"hobbyData\", hobbyData);\r\n                    setAllHobbies(hobbyData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n    const addEditHobby = () => {\r\n        if (loggedIn) {\r\n            \r\n            const getData = async () => {\r\n                try {\r\n                    var hobbsy = {\r\n                        name: document.getElementById(\"hobbyToEditName\").value, \r\n                        description: document.getElementById(\"hobbyToEditDescription\").value\r\n                    };\r\n                    // setHobby({\r\n                    //     name: document.getElementById(\"hobbyToEditName\").value,\r\n                    //     description: document.getElementById(\"hobbyToEditDescription\").value});\r\n                    const addEditingHobby = \r\n                    await facade.addEditHobby(hobbsy);\r\n                    console.log(\"Adding/Editing Hobby\", addEditingHobby);\r\n                    console.log(\"Hobby --- >\", hobbsy);\r\n                    const hobbyData = await facade.fetchAllHobbies();\r\n                    console.log(\"hobbyData\", hobbyData);\r\n                    setAllHobbies(hobbyData);\r\n                } catch (e) {\r\n                    console.log(\"err\", e);\r\n                }\r\n            };\r\n            getData();\r\n        }\r\n      };\r\n\r\n    if(facade.getRole() === \"admin\"){\r\n        return (\r\n        <div>\r\n        <table>\r\n            <thead><tr><td><b>Name</b></td><td><b>Description</b></td></tr></thead>\r\n             <tbody>\r\n                {allHobbies.map((hobby) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{hobby.name}</td>\r\n                        <td>{hobby.description}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        <select id=\"hobbyToDelete\">\r\n            <option> - select a Hobby to delete - </option>\r\n            {allHobbies.map((hobby) => {\r\n              return <option key={uuid()}>{hobby.name}</option>;\r\n            })};\r\n        </select>\r\n        <button onClick={deleteHobbyByName} >Delete Hobby</button>\r\n        <hr />\r\n        <input placeholder=\"HobbyName\" type=\"text\" id=\"hobbyToEditName\" />\r\n        <input placeholder=\"HobbyDescription\" type=\"text\" id=\"hobbyToEditDescription\" />\r\n        <button onClick={addEditHobby} >Add/Edit Hobby</button>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else if(facade.getRole() === \"user\"){\r\n        return (\r\n        <div>\r\n        <table>\r\n            <thead><tr><td><b>Name</b></td><td><b>Description</b></td></tr></thead>\r\n             <tbody>\r\n                {allHobbies.map((hobby) => (\r\n                    <tr key={uuid()}>\r\n                        <td>{hobby.name}</td>\r\n                        <td>{hobby.description}</td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n        <hr />\r\n        </div>\r\n        )     \r\n    } else {\r\n        return (\r\n        <div>\r\n            <h2> Please login to view data</h2>\r\n        </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default Hobbies;","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route,\r\n  NavLink,\r\n  Switch\r\n} from \"react-router-dom\";\r\nimport facade from \"./components/loginFacade\";\r\nimport LogIn from \"./components/LogIn\";\r\nimport Search from \"./components/Search\";\r\nimport Home from \"./components/Home\";\r\nimport Hobbies from \"./components/Hobbies\";\r\n\r\nfunction App() {\r\n  console.log(\"App\");\r\n  const token = localStorage.getItem(\"jwtToken\");\r\n  const [loggedIn, setLoggedIn] = useState(token ? true : false);\r\n  const [allHobbies, setAllHobbies] = useState([]);\r\n  const [person, setPerson] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n        const getData = async () => {\r\n            try {\r\n                const hobbyData = await facade.fetchAllHobbies();\r\n                console.log(\"hobbyData\", hobbyData);\r\n                setAllHobbies(hobbyData);\r\n            } catch (e) {\r\n                console.log(\"err\", e);\r\n            }\r\n        };\r\n        getData();\r\n    }\r\n}, [loggedIn]);\r\n\r\n  const logout = () => {\r\n    console.log(\"App - logout\");\r\n    facade.logout();\r\n    setLoggedIn(false);\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  const login = (user, pass) => {\r\n    console.log(\"App - login\");\r\n    facade.login(user, pass).then(res => setLoggedIn(true));\r\n    console.log(\"loggedIn\", loggedIn);\r\n  };\r\n  return (\r\n    <div>\r\n      <Router >\r\n        <div>\r\n          <Header loggedIn={loggedIn} />\r\n          <Switch>\r\n            <Route exact path=\"/\"><Home /></Route>\r\n            <Route path=\"/search\"><Search loggedIn={loggedIn} allHobbies={allHobbies} person={person} setPerson={setPerson}/></Route>\r\n            <Route path=\"/hobbies\"><Hobbies loggedIn={loggedIn} allHobbies={allHobbies} setAllHobbies={setAllHobbies}/></Route>\r\n            <Route path=\"/log\"><LogIn\r\n              facade={facade}\r\n              loggedIn={loggedIn}\r\n              login={login}\r\n              logout={logout}\r\n            /></Route>\r\n            <Route component={NoMatch} />\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Header({ loggedIn }) {\r\n  console.log(\"Header\");\r\n  return (\r\n    <div>\r\n      <ul className=\"header\">\r\n        <li><NavLink exact activeClassName=\"active\" to=\"/\">Home</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/search\">{loggedIn ? <div>Search</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/hobbies\">{loggedIn ? <div>Hobbies</div> : <div id=\"navbar\"></div>}</NavLink></li>\r\n        <li><NavLink activeClassName=\"active\" to=\"/log\">{loggedIn ? <div>Logout</div> : <div>Login</div>}</NavLink></li>\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction NoMatch() {\r\n  console.log(\"NoMatch\");\r\n  return (\r\n    <div>\r\n      hello NoMatch\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}