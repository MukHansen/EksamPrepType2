(this.webpackJsonpreact_security=this.webpackJsonpreact_security||[]).push([[0],{23:function(e,t,n){e.exports=n(37)},28:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(18),r=n.n(o),c=(n(28),n(2)),u=n.n(c),i=n(5),s=n(6),m=n(11),h=n(8),p=n(19),E=n(20),b="https://mukh.dk/EksamPrepType1";function d(e){return e.ok?e.json():Promise.reject({status:e.status,fullError:e.json()})}var g=new(function(){function e(){var t=this;Object(p.a)(this,e),this.setToken=function(e){localStorage.setItem("jwtToken",e)},this.getToken=function(){return localStorage.getItem("jwtToken")},this.loggedIn=function(){return console.log("loggedIn func"),null!=t.getToken()},this.logout=function(){localStorage.removeItem("jwtToken")},this.login=function(e,n){console.log("user, pass",e,n);var a=t.makeOptions("POST",!0,{username:e,password:n});return fetch(b+"/api/login",a).then(d).then((function(e){t.setToken(e.token)})).catch((function(e){throw e}))},this.getRole=function(){var e=localStorage.getItem("jwtToken").split(".")[1],t=window.atob(e);return JSON.parse(t).roles},this.fetchAllHobbies=function(){console.log("fetchingAllHobbies");var e=t.makeOptions("GET",!0);return fetch(b+"/api/person/allhobbies",e).then(d)},this.deleteHobby=function(e){console.log("Deleting hobby",e);var n=t.makeOptions("DELETE",!0);return fetch(b+"/api/person/deletehobby/"+e,n).then(d)},this.addEditHobby=function(e){console.log("Editing hobby",e);var n=t.makeOptions("PUT",!0,e);return fetch(b+"/api/person/edithobby",n).then(d)},this.fetchPersonsByHobby=function(e){console.log("fetchingPersonsByHobby");var n=t.makeOptions("GET",!0);return fetch(b+"/api/person/hobby/"+e,n).then(d)},this.fetchPersonById=function(e){console.log("fetchingPersonById");var n=t.makeOptions("GET",!0);return fetch(b+"/api/person/id/"+e,n).then(d)},this.fetchPersonByEmail=function(e){console.log("fetchingPersonByEmail");var n=t.makeOptions("GET",!0);return fetch(b+"/api/person/email/"+e,n).then(d)},this.fetchPersonByPhone=function(e){console.log("fetchingPersonByPhone");var n=t.makeOptions("GET",!0);return fetch(b+"/api/person/phone/"+e,n).then(d)},this.fetchData=function(){console.log("fetchData");var e=t.makeOptions("GET",!0);return"admin"===t.getRole()?fetch(b+"/api/info/admin",e).then(d):fetch(b+"/api/info/user",e).then(d)}}return Object(E.a)(e,[{key:"makeOptions",value:function(e,t,n){console.log("makeOptions");var a={method:e,headers:{"Content-type":"application/json",Accept:"application/json"}};return t&&this.loggedIn()&&(a.headers["x-access-token"]=this.getToken()),n&&(a.body=JSON.stringify(n)),console.log("opts",a),a}}]),e}());var f=function(e){console.log("LogIn");var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),u=Object(s.a)(c,2),i=u[0],m=u[1];return console.log("user, pass",o,i),e.loggedIn?l.a.createElement("div",null,l.a.createElement("h2",null,"Logout"),l.a.createElement("button",{onClick:function(t){console.log("LogIn - logout"),t.preventDefault(),e.logout()}},"Logout")):l.a.createElement("div",null,l.a.createElement("h2",null,"Login"),l.a.createElement("form",{onChange:function(e){console.log("onChange  ->",e.target.id),"username"==[e.target.id]?(console.log("username",e.target.value),r(e.target.value)):(console.log("password",e.target.value),m(e.target.value))}},l.a.createElement("input",{placeholder:"User Name",id:"username"}),l.a.createElement("input",{placeholder:"Password",id:"password",type:"password"}),l.a.createElement("button",{onClick:function(t){console.log("LogIn - login"),t.preventDefault(),console.log("user, pass",o,i),e.login(o,i)}},"Login")))},v=n(10),y=n.n(v);var k=function(e){var t=e.loggedIn;console.log("Data"),console.log("loggedIn",t);var n=Object(a.useState)({fName:"",lName:"",phone:"",email:""}),o=Object(s.a)(n,2),r=o[0],c=o[1],m=Object(a.useState)([]),h=Object(s.a)(m,2),p=h[0],E=h[1];return t?l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("input",{placeholder:"Id",type:"text",id:"id"}),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.fetchPersonById(document.getElementById("id").value);case 3:t=e.sent,console.log("fetchingById personData",t),c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}},"Search by id"),l.a.createElement("hr",null),l.a.createElement("input",{placeholder:"Email",type:"text",id:"email"}),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.fetchPersonByEmail(document.getElementById("email").value);case 3:t=e.sent,console.log("fetchingByEmail personData",t),c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}},"Search by email"),l.a.createElement("hr",null),l.a.createElement("input",{placeholder:"Phone",type:"text",id:"phone"}),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.fetchPersonByPhone(document.getElementById("phone").value);case 3:t=e.sent,console.log("fetchingByPhone personData",t),c(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}},"Search by phone"),l.a.createElement("hr",null),l.a.createElement("input",{placeholder:"HobbyName",type:"text",id:"hobbyName"}),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.fetchPersonsByHobby(document.getElementById("hobbyName").value);case 3:t=e.sent,console.log("fetchingPersonsByHobby personData",t),E(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}},"Search by Hobby"),l.a.createElement("hr",null),l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"First name:"),l.a.createElement("td",null,r.fName)),l.a.createElement("tr",null,l.a.createElement("td",null,"Last name:"),l.a.createElement("td",null,r.lName)),l.a.createElement("tr",null,l.a.createElement("td",null,"Phone:"),l.a.createElement("td",null,r.phone)),l.a.createElement("tr",null,l.a.createElement("td",null,"Email:"),l.a.createElement("td",null,r.email)))),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"First name"),l.a.createElement("td",null,"Last name"),l.a.createElement("td",null,"Phone"),l.a.createElement("td",null,"Email"))),l.a.createElement("tbody",null,p.map((function(e){return l.a.createElement("tr",{key:y()()},l.a.createElement("td",null,e.fName),l.a.createElement("td",null,e.lName),l.a.createElement("td",null,e.phone),l.a.createElement("td",null,e.email))})))))):l.a.createElement("div",null,l.a.createElement("h2",null," Please login to view data"))};var O=function(){return console.log("Home"),l.a.createElement("div",null,l.a.createElement("hr",null),l.a.createElement("h2",null,"Welcome to Test-Exam-Exercise 1"),l.a.createElement("hr",null))};var x=function(e){var t=e.loggedIn,n=e.allHobbies,a=e.setAllHobbies;return console.log("Hobbies"),"admin"===g.getRole()?l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,"Name")),l.a.createElement("td",null,l.a.createElement("b",null,"Description")))),l.a.createElement("tbody",null,n.map((function(e){return l.a.createElement("tr",{key:y()()},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.description))})))),l.a.createElement("hr",null),l.a.createElement("select",{id:"hobbyToDelete"},l.a.createElement("option",null," - select a Hobby to delete - "),n.map((function(e){return l.a.createElement("option",{key:y()()},e.name)})),";"),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.deleteHobby(document.getElementById("hobbyToDelete").value);case 3:return t=e.sent,console.log("Deleting Hobby",t),e.next=7,g.fetchAllHobbies();case 7:n=e.sent,console.log("hobbyData",n),a(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}()()}},"Delete Hobby"),l.a.createElement("hr",null),l.a.createElement("input",{placeholder:"HobbyName",type:"text",id:"hobbyToEditName"}),l.a.createElement("input",{placeholder:"HobbyDescription",type:"text",id:"hobbyToEditDescription"}),l.a.createElement("button",{onClick:function(){t&&function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={name:document.getElementById("hobbyToEditName").value,description:document.getElementById("hobbyToEditDescription").value},e.next=4,g.addEditHobby(t);case 4:return n=e.sent,console.log("Adding/Editing Hobby",n),console.log("Hobby --- >",t),e.next=9,g.fetchAllHobbies();case 9:l=e.sent,console.log("hobbyData",l),a(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("err",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}()()}},"Add/Edit Hobby"),l.a.createElement("hr",null)):"user"===g.getRole()?l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,"Name")),l.a.createElement("td",null,l.a.createElement("b",null,"Description")))),l.a.createElement("tbody",null,n.map((function(e){return l.a.createElement("tr",{key:y()()},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.description))})))),l.a.createElement("hr",null)):l.a.createElement("div",null,l.a.createElement("h2",null," Please login to view data"))};function I(e){var t=e.loggedIn;return console.log("Header"),l.a.createElement("div",null,l.a.createElement("ul",{className:"header"},l.a.createElement("li",null,l.a.createElement(m.b,{exact:!0,activeClassName:"active",to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(m.b,{activeClassName:"active",to:"/search"},t?l.a.createElement("div",null,"Search"):l.a.createElement("div",{id:"navbar"}))),l.a.createElement("li",null,l.a.createElement(m.b,{activeClassName:"active",to:"/hobbies"},t?l.a.createElement("div",null,"Hobbies"):l.a.createElement("div",{id:"navbar"}))),l.a.createElement("li",null,l.a.createElement(m.b,{activeClassName:"active",to:"/log"},t?l.a.createElement("div",null,"Logout"):l.a.createElement("div",null,"Login")))))}function j(){return console.log("NoMatch"),l.a.createElement("div",null,"hello NoMatch")}var H=function(){console.log("App");var e=localStorage.getItem("jwtToken"),t=Object(a.useState)(!!e),n=Object(s.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)([]),p=Object(s.a)(c,2),E=p[0],b=p[1],d=Object(a.useState)([]),v=Object(s.a)(d,2),y=v[0],H=v[1];return Object(a.useEffect)((function(){o&&function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.fetchAllHobbies();case 3:t=e.sent,console.log("hobbyData",t),b(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()()}),[o]),l.a.createElement("div",null,l.a.createElement(m.a,null,l.a.createElement("div",null,l.a.createElement(I,{loggedIn:o}),l.a.createElement(h.c,null,l.a.createElement(h.a,{exact:!0,path:"/"},l.a.createElement(O,null)),l.a.createElement(h.a,{path:"/search"},l.a.createElement(k,{loggedIn:o,allHobbies:E,person:y,setPerson:H})),l.a.createElement(h.a,{path:"/hobbies"},l.a.createElement(x,{loggedIn:o,allHobbies:E,setAllHobbies:b})),l.a.createElement(h.a,{path:"/log"},l.a.createElement(f,{facade:g,loggedIn:o,login:function(e,t){console.log("App - login"),g.login(e,t).then((function(e){return r(!0)})),console.log("loggedIn",o)},logout:function(){console.log("App - logout"),g.logout(),r(!1),console.log("loggedIn",o)}})),l.a.createElement(h.a,{component:j})))))};r.a.render(l.a.createElement(H,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.703421e5.chunk.js.map